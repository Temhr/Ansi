# set up distrobox support
- name: mk directories for steam
  ansible.builtin.file:
    path: /home/temhr/{{ item.dir }}
    state: directory
    owner: temhr
    group: root
  with_items:
    - { dir: containers }
    - { dir: containers/steamos }

# set up distrobox support
- name: mk temp directories for ansible
  ansible.builtin.file:
    path: /tmp/temhr/.ansible/tmp
    state: directory
    owner: temhr
    group: root
    mode: 760

- name: steamos setup
  ansible.builtin.command: distrobox create --home /home/temhr/containers/steamos --name steamos --image ghcr.io/linuxserver/steamos:latest --hostname steamos --nvidia
  become: yes
  become_user: temhr
